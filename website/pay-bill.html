<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Bill - Palms n Sands</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; }
        .transaction-container { max-width: 600px; margin: 40px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 16px rgba(0,0,0,0.08); padding: 32px; }
        .qr-img { width: 160px; height: 160px; margin: 0 auto; display: block; }
        .payment-methods .btn { margin: 8px 0; }
        .split-bill-row { margin-bottom: 12px; }
        .transaction-status { margin-top: 24px; }
    </style>
</head>
<body>
    <div class="transaction-container">
        <h2 class="mb-4 text-center">Pay Your Bill</h2>
        <div id="bill-summary">
            <h5>Bill Summary</h5>
            <ul class="list-group mb-3" id="bill-items">
                <!-- Bill items will be dynamically loaded here -->
            </ul>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <strong>Total:</strong>
                <span id="bill-total">₹0.00</span>
            </div>
        </div>
        <hr>
        <h5 class="mb-3 text-center">Choose Payment Method</h5>
        <div class="payment-methods mb-4 d-flex justify-content-center gap-3 flex-wrap">
            <button class="btn btn-lg btn-gradient shadow-sm d-flex flex-column align-items-center" id="pay-upi-btn" style="background: linear-gradient(135deg,#ffb6c1,#ff69b4); color: #fff; border: none; width: 120px; height: 120px;">
                <span style="font-size:2em;"><i class="fas fa-mobile-alt"></i></span>
                <span style="margin-top:8px;">UPI</span>
            </button>
            <button class="btn btn-lg btn-gradient shadow-sm d-flex flex-column align-items-center" id="pay-card-btn" style="background: linear-gradient(135deg,#a1c4fd,#c2e9fb); color: #333; border: none; width: 120px; height: 120px;">
                <span style="font-size:2em;"><i class="far fa-credit-card"></i></span>
                <span style="margin-top:8px;">Card</span>
            </button>
            <button class="btn btn-lg btn-gradient shadow-sm d-flex flex-column align-items-center" id="pay-cash-btn" style="background: linear-gradient(135deg,#fbc2eb,#a6c1ee); color: #333; border: none; width: 120px; height: 120px;">
                <span style="font-size:2em;"><i class="fas fa-money-bill-wave"></i></span>
                <span style="margin-top:8px;">Cash</span>
            </button>
        </div>
        <style>
        .btn-gradient {
            transition: transform 0.15s, box-shadow 0.15s;
        }
        .btn-gradient:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            opacity: 0.95;
        }
        </style>
        <div id="payment-section">
            <!-- Payment forms will be shown here -->
        </div>
        <div class="transaction-status" id="transaction-status"></div>
        <hr>
        <div class="text-center">
            <small>Need help? <a href="tel:+917795041070">Contact us</a></small>
        </div>
    </div>
    <script>
        // Use actual cart data from localStorage if available
        let billData = { items: [] };
        try {
            const stored = localStorage.getItem('payBillCart');
            if (stored) {
                billData.items = JSON.parse(stored);
            }
        } catch (e) {
            billData.items = [];
        }
        function renderBill() {
            const billItems = document.getElementById('bill-items');
            billItems.innerHTML = '';
            let total = 0;
            billData.items.forEach(item => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';
                li.innerHTML = `<span>${item.name} <small>x${item.quantity}</small></span><span>₹${(item.price * item.quantity).toFixed(2)}</span>`;
                billItems.appendChild(li);
                total += item.price * item.quantity;
            });
            // Calculate GST
            const gst = total * 0.025;
            const grandTotal = total + gst;
            document.getElementById('bill-total').innerHTML = `₹${total.toFixed(2)}<br><small>GST (2.5%): ₹${gst.toFixed(2)}</small><br><strong>Grand Total: ₹${grandTotal.toFixed(2)}</strong>`;
        }
        renderBill();
        // Payment method handlers
        const paymentSection = document.getElementById('payment-section');
        document.getElementById('pay-upi-btn').onclick = function() {
            paymentSection.innerHTML = `
                <div class="mb-3 text-center">
                    <img src="payment.jpg" alt="UPI QR" class="qr-img mb-2">
                    <p>Scan the QR code or enter your UPI ID below:</p>
                    <input type="text" class="form-control mb-2" placeholder="Enter UPI ID">
                    <button class="btn btn-primary w-100">Pay via UPI</button>
                </div>
            `;
        };
        document.getElementById('pay-card-btn').onclick = function() {
            paymentSection.innerHTML = `
                <form class="mb-3">
                    <div class="mb-2"><input type="text" class="form-control" placeholder="Card Number" maxlength="16"></div>
                    <div class="row mb-2">
                        <div class="col"><input type="text" class="form-control" placeholder="MM/YY" maxlength="5"></div>
                        <div class="col"><input type="text" class="form-control" placeholder="CVV" maxlength="3"></div>
                    </div>
                    <button class="btn btn-success w-100">Pay via Card</button>
                </form>
            `;
        };
        document.getElementById('pay-cash-btn').onclick = function() {
            paymentSection.innerHTML = `
                <div class="mb-3 text-center">
                    <p>Please pay your bill in cash to our staff. Thank you!</p>
                </div>
            `;
        };
    </script>
</body>
</html>
